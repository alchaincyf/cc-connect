# CC Connect 产品需求文档 (PRD)

> 版本：v1.0 | 更新日期：2026-01-21

---

## 1. 产品愿景

> **让 Claude Code 用户 3 分钟内实现手机远程控制**

一句话：帮助 Claude Code 重度用户在手机上监控任务状态、接收通知、远程输入，不用再被困在电脑前。

---

## 2. 产品背景

### 市场机会

Claude Code 是当前最强的 AI 编程助手，但被锁定在本地终端：
- 用户需要一直盯着屏幕，等待任务完成或需要输入
- 长任务运行时，用户无法离开电脑
- 碎片时间（通勤、等人）无法利用

### 用户痛点

| 痛点 | 严重程度 | 现有方案解决程度 |
|------|---------|-----------------|
| 无法远程监控任务状态 | ⭐⭐⭐⭐⭐ | Omnara/Happy 可解决 |
| 无法远程批准/输入 | ⭐⭐⭐⭐⭐ | Omnara/Happy 可解决 |
| 手机操作体验差 | ⭐⭐⭐⭐ | 所有方案都有问题 |
| **设置配置复杂** | ⭐⭐⭐⭐ | **Happy 最复杂，这是我们的机会** |
| 隐私安全顾虑 | ⭐⭐⭐ | Happy 最好 |

### 竞品现状

| 产品 | 定价 | 核心问题 |
|------|------|---------|
| Omnara (YC S25) | $9/月 | 不稳定，用户反馈"vibe coded" |
| Happy Coder | 免费 | 配置复杂（30-60分钟） |
| 官方 Claude App | 订阅内 | 功能基础，非本地 Claude Code |

**我们的机会**：极简上手 + 稳定可靠 + 中文优先

---

## 3. 设计原则

1. **极简至上**：能少一步就少一步，用户不需要理解技术细节
2. **即时反馈**：状态变化立即推送，用户永远知道发生了什么
3. **本地优先**：控制的是用户本地的 Claude Code，不是云端替代品
4. **稳定可靠**：宁可功能少，不能体验差

---

## 4. 用户画像

### 主力用户：独立开发者 / 创业团队技术负责人

**典型特征**：
- 每天使用 Claude Code 2-4 小时
- 经常需要跑长任务（代码重构、测试、部署）
- 不想一直盯着屏幕等结果
- 技术能力强，但时间宝贵，不愿折腾配置

**核心场景**：
1. 启动任务后想去吃饭/休息，需要知道什么时候完成
2. 躺床上想让 Claude 帮忙改一行代码
3. 出差途中收到告警，需要快速 debug
4. 同时跑多个 Claude Code 实例，需要并行监控

---

## 5. 功能架构

### 5.1 核心功能模块

```
CC Connect
├── 会话管理
│   ├── 会话列表
│   ├── 会话详情
│   └── 会话切换
├── 实时同步
│   ├── 输出流展示
│   ├── 状态指示器
│   └── 进度追踪
├── 远程控制
│   ├── 文本输入
│   ├── 快捷回复（是/否/继续）
│   └── 中断操作
├── 通知系统
│   ├── 推送通知
│   └── 通知设置
└── 配对连接
    ├── 扫码配对
    └── 连接状态
```

### 5.2 功能优先级

| 功能 | 优先级 | MVP | 说明 |
|------|--------|-----|------|
| 扫码配对 | P0 | ✅ | 核心上手体验 |
| 实时输出展示 | P0 | ✅ | 核心价值 |
| 推送通知 | P0 | ✅ | 核心价值 |
| 远程文本输入 | P0 | ✅ | 核心价值 |
| 会话列表 | P0 | ✅ | 多任务管理 |
| 快捷回复按钮 | P1 | ✅ | 提升效率 |
| 状态指示器 | P1 | ✅ | 用户体验 |
| 通知设置 | P1 | ✅ | 基础配置 |
| 代码语法高亮 | P2 | ❌ | 体验增强 |
| 语音输入 | P2 | ❌ | 后续迭代 |
| 深色模式 | P2 | ❌ | 后续迭代 |
| Git diff 可视化 | P3 | ❌ | 后续迭代 |

### 5.3 功能详细说明

#### P0-1：扫码配对

**描述**：用户在 Mac 终端运行 `cc-cli`，显示二维码，手机扫码即连接成功。

**流程**：
1. 用户安装 CLI：`brew install cc-connect` 或 `npm install -g cc-connect`
2. 运行 `cc start`，终端显示二维码
3. 打开 iOS App，点击"扫码连接"
4. 扫码成功，建立 WebSocket 连接
5. 开始使用

**验收标准**：
- [ ] 二维码生成在 3 秒内完成
- [ ] 扫码到连接成功 < 5 秒
- [ ] 连接断开有明确提示

#### P0-2：实时输出展示

**描述**：Claude Code 的所有输出实时同步到手机屏幕。

**要求**：
- 延迟 < 500ms
- 支持滚动查看历史
- 支持自动滚动到底部
- 长文本不卡顿

#### P0-3：推送通知

**描述**：当 Claude Code 需要用户输入、任务完成、或出错时，推送通知到手机。

**通知类型**：
| 类型 | 触发条件 | 通知内容 |
|------|---------|---------|
| 需要输入 | Claude 等待用户响应 | "Claude 正在等待你的输入" |
| 任务完成 | Claude 完成当前任务 | "任务已完成：[摘要]" |
| 出错 | Claude 报错 | "出错了：[错误摘要]" |

#### P0-4：远程文本输入

**描述**：用户可以在手机上输入文本，发送给 Claude Code。

**要求**：
- 支持多行输入
- 发送后有确认反馈
- 支持快捷回复按钮（是/否/继续/取消）

#### P0-5：会话列表

**描述**：管理多个 Claude Code 实例。

**要求**：
- 显示所有活跃会话
- 显示每个会话的状态（运行中/等待输入/空闲）
- 点击切换会话

---

## 6. 用户旅程

### 6.1 首次使用流程

```
[下载App] → [打开App]
    → [看到引导：安装CLI]
    → [打开终端，运行 brew install cc-connect]
    → [运行 cc start]
    → [终端显示二维码]
    → [App扫码]
    → [连接成功，进入主界面]
    → [看到Claude Code输出]
```

**目标**：从下载到看到输出 < 3分钟

### 6.2 日常使用流程

```
[Mac启动cc start] → [Claude Code在里面跑]
    → [用户离开电脑]
    → [手机收到通知："Claude需要输入"]
    → [打开App，看到上下文]
    → [输入回复]
    → [继续其他事]
    → [收到通知："任务完成"]
```

---

## 7. 数据指标

### 北极星指标
**周活跃会话数（WAC）**：每周至少发送过一次输入的活跃用户数

### 过程指标
| 指标 | 目标 | 说明 |
|------|------|------|
| 首次配对成功率 | > 90% | 扫码到连接成功 |
| 配对耗时 | < 3分钟 | 从安装CLI到连接成功 |
| 消息延迟 | < 500ms | 输出同步延迟 |
| 推送到达率 | > 95% | 通知送达率 |
| 日均会话时长 | > 30分钟 | 用户粘性 |

### 健康度指标
| 指标 | 阈值 | 说明 |
|------|------|------|
| 连接断开率 | < 5% | 稳定性 |
| App 崩溃率 | < 0.1% | 质量 |
| 用户投诉率 | < 1% | 体验 |

---

## 8. MVP范围

### 包含（明确列出）
- [x] CLI 工具（`cc-connect`）：包装 Claude Code，生成配对二维码
- [x] iOS App：扫码、查看输出、发送输入、接收通知
- [x] 云端中继：消息转发、推送通知
- [x] 基础会话管理：列表、切换

### 不包含（明确排除）
- [ ] 端到端加密（用户明确不需要）
- [ ] 语音输入
- [ ] 代码语法高亮
- [ ] Git diff 可视化
- [ ] 团队协作
- [ ] Android 版本
- [ ] Web 版本

### 后续迭代计划

**v1.1**（MVP + 2周）
- 代码语法高亮
- 深色模式
- 通知自定义

**v1.2**（MVP + 1月）
- 语音输入
- Git diff 可视化
- 性能优化

**v2.0**（待验证需求）
- 团队协作
- 多 Agent 支持（Cursor、Copilot 等）

---

## 9. 核心假设与验证

| 假设 | 验证方式 | 验证时机 | 失败后备 |
|------|----------|----------|----------|
| 用户愿意安装额外的 CLI | MVP 数据 | 上线后1周 | 提供更简单的安装方式 |
| 推送通知是核心需求 | 用户访谈 + 数据 | 上线后2周 | 降低推送权限要求 |
| 3分钟上手是差异化优势 | 竞品对比测试 | 开发前 | 进一步简化 |
| 云端中继延迟可接受 | 技术验证 | 开发中 | 考虑 P2P 方案 |

---

## 10. 风险与应对

| 风险 | 影响 | 概率 | 应对策略 |
|------|------|------|----------|
| Anthropic 官方做类似功能 | 高 | 中 | 快速迭代，建立用户基础；差异化中文市场 |
| Claude Code 接口变化 | 高 | 低 | 监控更新，快速适配 |
| 用户隐私顾虑 | 中 | 中 | 明确隐私政策，考虑本地模式 |
| 推送通知权限被拒 | 中 | 中 | 提供 App 内轮询作为后备 |
| 网络不稳定导致断连 | 中 | 中 | 自动重连 + 离线消息缓存 |

---

## 附录

### A. 技术约束
- iOS 17+（使用 SwiftData）
- 需要网络连接
- Mac 需要安装 Node.js（CLI 依赖）

### B. 相关文档
- 竞品分析报告：`docs/research/竞品深度分析报告.md`
- 技术设计：`docs/04-技术设计.md`（待完成）

---

**文档状态**：草稿
**负责人**：花叔
**评审状态**：待评审
