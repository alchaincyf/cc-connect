# CC Connect 设计系统规范

> 版本：v2.0 | 更新日期：2026-01-21
>
> 这是一次完整的设计重构，目标是建立专业的开发者工具视觉语言

---

## 一、设计理念

### 1.1 产品定位

CC Connect 是 **Claude Code 的移动控制台**，核心场景：

1. **远程监控**：离开电脑后查看任务进度
2. **权限批准**：一触批准工具调用、命令执行
3. **快速输入**：回答问题、提供上下文
4. **多任务管理**：并行监控多个 Claude Code 实例

### 1.2 设计原则

#### 原则 1：开发者工具美学

> 专业但不冰冷，终端感但现代化

- 深色主题为主（开发者习惯）
- 等宽字体展示代码
- 信息密度高于装饰性
- 避免过度圆角和渐变

#### 原则 2：信息密度优先

> 小屏幕上，每个像素都要有价值

- 减少留白装饰，增加有效内容
- 一屏展示更多信息
- 重要信息视觉突出
- 次要信息可折叠

#### 原则 3：操作即时响应

> 权限请求一目了然，一触即达

- 权限请求必须强制打断用户
- 按钮足够大，触控友好
- 操作有触觉反馈
- 状态变化有动画过渡

#### 原则 4：移动端原生体验

> 这是移动 App，不是桌面端的缩小版

- 单手操作友好（主要操作在底部）
- 支持手势（滑动删除、下拉刷新）
- 尊重系统规范（Dynamic Type、安全区域）
- 触觉反馈增强体验

### 1.3 与竞品的差异化

| 竞品问题 | 我们的解决方案 |
|---------|--------------|
| Omnara 不支持文本选择 | 全局支持文本选择复制 |
| Happy 配置复杂 | 扫码即连，3分钟上手 |
| 通用聊天 App 风格 | 开发者工具专业美学 |
| 信息密度低 | IDE 风格紧凑布局 |
| 权限请求不突出 | Sheet 弹出强制处理 |

---

## 二、色彩系统

### 2.1 设计思路

采用 **深色优先** 的设计策略：

1. 开发者普遍偏好深色主题
2. 深色背景下代码更易阅读
3. 夜间使用更护眼
4. 强调色更突出

色彩灵感来源：
- GitHub Dark 主题
- VS Code Dark+
- Claude 品牌色

### 2.2 核心色板

#### 背景色（Background）

| 名称 | 深色模式 | 浅色模式 | 用途 |
|------|---------|---------|------|
| `bg.primary` | `#0D1117` | `#FFFFFF` | 主背景 |
| `bg.secondary` | `#161B22` | `#F6F8FA` | 卡片背景 |
| `bg.tertiary` | `#21262D` | `#F0F3F6` | 输入框、次级容器 |
| `bg.elevated` | `#30363D` | `#FFFFFF` | 弹窗、Sheet |

#### 边框色（Border）

| 名称 | 深色模式 | 浅色模式 | 用途 |
|------|---------|---------|------|
| `border.default` | `#30363D` | `#D1D9E0` | 普通边框 |
| `border.muted` | `#21262D` | `#E6EBF1` | 弱化边框 |
| `border.emphasis` | `#8B949E` | `#8C959F` | 强调边框 |

#### 文字色（Text）

| 名称 | 深色模式 | 浅色模式 | 用途 |
|------|---------|---------|------|
| `text.primary` | `#E6EDF3` | `#1F2328` | 主要文字 |
| `text.secondary` | `#8B949E` | `#656D76` | 次要文字 |
| `text.tertiary` | `#6E7681` | `#8C959F` | 辅助文字 |
| `text.disabled` | `#484F58` | `#AFB8C1` | 禁用文字 |
| `text.link` | `#58A6FF` | `#0969DA` | 链接文字 |

#### 强调色（Accent）

| 名称 | 色值 | 用途 |
|------|------|------|
| `accent.claude` | `#CA8A04` | Claude 品牌色，用于 Claude 消息标识 |
| `accent.primary` | `#58A6FF` | 主强调色，按钮、链接 |
| `accent.success` | `#238636` | 成功、允许、已连接 |
| `accent.warning` | `#DB6D28` | 警告、等待输入 |
| `accent.danger` | `#DA3633` | 危险、拒绝、错误 |
| `accent.info` | `#58A6FF` | 信息、工具调用 |

#### 语义色（Semantic）

| 场景 | 背景色 | 文字色 | 边框色 |
|------|-------|-------|-------|
| 成功 | `#238636` 15% | `#3FB950` | `#238636` |
| 警告 | `#DB6D28` 15% | `#DB6D28` | `#9E6A03` |
| 错误 | `#DA3633` 15% | `#F85149` | `#DA3633` |
| 信息 | `#58A6FF` 15% | `#58A6FF` | `#1F6FEB` |

### 2.3 终端专用色

代码和终端输出使用专门的配色：

| 名称 | 色值 | 用途 |
|------|------|------|
| `terminal.bg` | `#0D1117` | 终端/代码背景 |
| `terminal.text` | `#C9D1D9` | 默认文字 |
| `terminal.comment` | `#8B949E` | 注释、行号 |
| `terminal.keyword` | `#FF7B72` | 关键字 |
| `terminal.string` | `#A5D6FF` | 字符串 |
| `terminal.number` | `#79C0FF` | 数字 |
| `terminal.function` | `#D2A8FF` | 函数名 |
| `terminal.variable` | `#FFA657` | 变量 |
| `terminal.type` | `#7EE787` | 类型 |

### 2.4 状态色映射

| 会话状态 | 指示器颜色 | 徽章背景 |
|---------|----------|---------|
| `running` | `#238636` | `#238636` 20% |
| `waiting` | `#DB6D28` | `#DB6D28` 20% |
| `idle` | `#6E7681` | `#6E7681` 20% |
| `error` | `#DA3633` | `#DA3633` 20% |
| `disconnected` | `#484F58` | `#484F58` 20% |

### 2.5 Swift 代码实现

```swift
import SwiftUI

// MARK: - Design Tokens

enum CCColor {
    // Background
    static let bgPrimary = Color("bg.primary")
    static let bgSecondary = Color("bg.secondary")
    static let bgTertiary = Color("bg.tertiary")
    static let bgElevated = Color("bg.elevated")

    // Text
    static let textPrimary = Color("text.primary")
    static let textSecondary = Color("text.secondary")
    static let textTertiary = Color("text.tertiary")
    static let textDisabled = Color("text.disabled")

    // Accent
    static let accentClaude = Color(hex: "CA8A04")
    static let accentPrimary = Color(hex: "58A6FF")
    static let accentSuccess = Color(hex: "238636")
    static let accentWarning = Color(hex: "DB6D28")
    static let accentDanger = Color(hex: "DA3633")

    // Terminal
    static let terminalBg = Color(hex: "0D1117")
    static let terminalText = Color(hex: "C9D1D9")
}

// MARK: - Color Assets (Assets.xcassets)

// bg.primary:
//   Dark:  #0D1117
//   Light: #FFFFFF

// bg.secondary:
//   Dark:  #161B22
//   Light: #F6F8FA

// text.primary:
//   Dark:  #E6EDF3
//   Light: #1F2328

// ... 其他颜色同理
```

---

## 三、字体系统

### 3.1 字体选择

| 用途 | 字体 | 备选 |
|------|------|------|
| 界面文字 | SF Pro | System Default |
| 代码/终端 | SF Mono | Menlo |
| 数字强调 | SF Pro Rounded | - |

### 3.2 字体规模

采用 iOS Human Interface Guidelines 推荐的动态字体：

| 名称 | 字号 | 字重 | 行高 | 用途 |
|------|------|------|------|------|
| `largeTitle` | 34pt | Bold | 41pt | 页面大标题 |
| `title1` | 28pt | Bold | 34pt | 一级标题 |
| `title2` | 22pt | Bold | 28pt | 二级标题 |
| `title3` | 20pt | Semibold | 25pt | 三级标题 |
| `headline` | 17pt | Semibold | 22pt | 列表标题、按钮 |
| `body` | 17pt | Regular | 22pt | 正文 |
| `callout` | 16pt | Regular | 21pt | 标注 |
| `subheadline` | 15pt | Regular | 20pt | 副标题 |
| `footnote` | 13pt | Regular | 18pt | 脚注 |
| `caption1` | 12pt | Regular | 16pt | 小标签 |
| `caption2` | 11pt | Regular | 13pt | 最小文字 |

### 3.3 代码字体规模

| 名称 | 字号 | 行高 | 用途 |
|------|------|------|------|
| `code.large` | 15pt | 20pt | 主要代码展示 |
| `code.medium` | 14pt | 19pt | 代码块 |
| `code.small` | 13pt | 18pt | 行内代码 |
| `code.xsmall` | 12pt | 16pt | 代码注释、行号 |

### 3.4 Swift 代码实现

```swift
import SwiftUI

extension Font {
    // MARK: - Interface Fonts
    static let ccLargeTitle = Font.system(size: 34, weight: .bold)
    static let ccTitle1 = Font.system(size: 28, weight: .bold)
    static let ccTitle2 = Font.system(size: 22, weight: .bold)
    static let ccTitle3 = Font.system(size: 20, weight: .semibold)
    static let ccHeadline = Font.system(size: 17, weight: .semibold)
    static let ccBody = Font.system(size: 17, weight: .regular)
    static let ccCallout = Font.system(size: 16, weight: .regular)
    static let ccSubheadline = Font.system(size: 15, weight: .regular)
    static let ccFootnote = Font.system(size: 13, weight: .regular)
    static let ccCaption1 = Font.system(size: 12, weight: .regular)
    static let ccCaption2 = Font.system(size: 11, weight: .regular)

    // MARK: - Code Fonts
    static let ccCodeLarge = Font.system(size: 15, weight: .regular, design: .monospaced)
    static let ccCodeMedium = Font.system(size: 14, weight: .regular, design: .monospaced)
    static let ccCodeSmall = Font.system(size: 13, weight: .regular, design: .monospaced)
    static let ccCodeXSmall = Font.system(size: 12, weight: .regular, design: .monospaced)

    // MARK: - Special
    static let ccCodeBold = Font.system(size: 14, weight: .semibold, design: .monospaced)
    static let ccNumber = Font.system(size: 17, weight: .medium, design: .rounded)
}
```

---

## 四、间距系统

### 4.1 基础间距

采用 4pt 基础网格：

| Token | 值 | 用途 |
|-------|-----|------|
| `space.0` | 0pt | 无间距 |
| `space.1` | 4pt | 最小间距，图标与文字 |
| `space.2` | 8pt | 紧凑间距，行内元素 |
| `space.3` | 12pt | 默认间距，列表项内 |
| `space.4` | 16pt | 标准间距，卡片内边距 |
| `space.5` | 20pt | 较大间距 |
| `space.6` | 24pt | 区块间距 |
| `space.8` | 32pt | 大区块间距 |
| `space.10` | 40pt | 页面边距 |
| `space.12` | 48pt | 特大间距 |

### 4.2 应用场景

| 场景 | 间距 |
|------|------|
| 图标与标签 | `space.1` (4pt) |
| 按钮内边距 | `space.3` (12pt) 水平，`space.2` (8pt) 垂直 |
| 卡片内边距 | `space.4` (16pt) |
| 卡片间距 | `space.3` (12pt) |
| 列表项间距 | `space.2` (8pt) |
| 区块间距 | `space.6` (24pt) |
| 页面边距 | `space.4` (16pt) |

### 4.3 圆角系统

| Token | 值 | 用途 |
|-------|-----|------|
| `radius.none` | 0pt | 无圆角 |
| `radius.sm` | 4pt | 小圆角，标签 |
| `radius.md` | 8pt | 中圆角，按钮、输入框 |
| `radius.lg` | 12pt | 大圆角，卡片 |
| `radius.xl` | 16pt | 特大圆角，弹窗 |
| `radius.full` | 9999pt | 全圆，徽章、头像 |

### 4.4 Swift 代码实现

```swift
import SwiftUI

enum CCSpacing {
    static let space0: CGFloat = 0
    static let space1: CGFloat = 4
    static let space2: CGFloat = 8
    static let space3: CGFloat = 12
    static let space4: CGFloat = 16
    static let space5: CGFloat = 20
    static let space6: CGFloat = 24
    static let space8: CGFloat = 32
    static let space10: CGFloat = 40
    static let space12: CGFloat = 48

    // Semantic aliases
    static let xxs: CGFloat = space1   // 4pt
    static let xs: CGFloat = space2    // 8pt
    static let sm: CGFloat = space3    // 12pt
    static let md: CGFloat = space4    // 16pt
    static let lg: CGFloat = space6    // 24pt
    static let xl: CGFloat = space8    // 32pt
    static let xxl: CGFloat = space10  // 40pt
}

enum CCRadius {
    static let none: CGFloat = 0
    static let sm: CGFloat = 4
    static let md: CGFloat = 8
    static let lg: CGFloat = 12
    static let xl: CGFloat = 16
    static let full: CGFloat = 9999
}
```

---

## 五、图标系统

### 5.1 图标来源

优先使用 SF Symbols，保持 iOS 原生体验：

| 场景 | 图标 | SF Symbol |
|------|------|-----------|
| Claude 消息 | ✦ | `sparkles` |
| 用户输入 | ⌨ | `keyboard` |
| 工具调用 | 🔧 | `wrench.and.screwdriver` |
| 工具结果 | ✓ | `checkmark.circle` |
| 错误 | ⚠ | `exclamationmark.triangle` |
| 权限请求 | 🔐 | `lock.shield` |
| 设置 | ⚙ | `gearshape` |
| 扫码 | 📷 | `qrcode.viewfinder` |
| 发送 | ⬆ | `arrow.up.circle.fill` |
| 中断 | ⏹ | `stop.circle.fill` |
| 连接 | 📡 | `antenna.radiowaves.left.and.right` |
| 复制 | 📋 | `doc.on.doc` |
| 删除 | 🗑 | `trash` |
| 添加 | ＋ | `plus.circle` |

### 5.2 图标尺寸

| 尺寸 | 大小 | 用途 |
|------|------|------|
| `icon.xs` | 12pt | 徽章内图标 |
| `icon.sm` | 16pt | 行内图标 |
| `icon.md` | 20pt | 列表图标 |
| `icon.lg` | 24pt | 按钮图标 |
| `icon.xl` | 32pt | 主操作图标 |
| `icon.xxl` | 48pt | 空状态图标 |

### 5.3 状态图标

| 状态 | 图标 | 颜色 |
|------|------|------|
| 运行中 | `circle.fill` | `accentSuccess` |
| 等待输入 | `circle.fill` + 脉冲动画 | `accentWarning` |
| 空闲 | `circle.fill` | `textTertiary` |
| 错误 | `circle.fill` | `accentDanger` |
| 已断开 | `circle` (空心) | `textDisabled` |

---

## 六、组件规范

### 6.1 按钮（Button）

#### 主按钮（Primary Button）

```
┌─────────────────────────────────┐
│            按钮文字              │
└─────────────────────────────────┘
```

| 属性 | 值 |
|------|-----|
| 高度 | 50pt |
| 圆角 | 8pt (`radius.md`) |
| 字体 | `headline` (17pt Semibold) |
| 背景色 | `accentPrimary` |
| 文字色 | `#FFFFFF` |
| 内边距 | 16pt 水平 |
| 禁用态背景 | `textDisabled` |
| 加载态 | 显示 ProgressView |

#### 次要按钮（Secondary Button）

| 属性 | 值 |
|------|-----|
| 高度 | 50pt |
| 圆角 | 8pt |
| 背景色 | `bgTertiary` |
| 文字色 | `textPrimary` |
| 边框 | 1pt `border.default` |

#### 危险按钮（Danger Button）

| 属性 | 值 |
|------|-----|
| 背景色 | `accentDanger` |
| 其他 | 同主按钮 |

#### 快捷操作按钮（Quick Action）

用于权限请求等场景：

```
┌───────────┐
│  [Y] 允许  │
└───────────┘
```

| 属性 | 值 |
|------|-----|
| 高度 | 44pt（最小触控区域）|
| 最小宽度 | 80pt |
| 圆角 | 8pt |
| 字体 | `headline` |
| 快捷键提示 | `caption2` + 40%透明度 |

### 6.2 卡片（Card）

#### 会话卡片

```
┌──────────────────────────────────────┐
│ 🟢 会话名称                      ⚠️  │
│ 状态文字 · 时间                       │
│ > 最后一条消息预览...                 │
└──────────────────────────────────────┘
```

| 属性 | 值 |
|------|-----|
| 背景色 | `bgSecondary` |
| 圆角 | 12pt (`radius.lg`) |
| 内边距 | 16pt |
| 卡片间距 | 12pt |
| 状态图标 | 10pt 圆点 |
| 标题 | `headline` |
| 副标题 | `footnote` + `textSecondary` |
| 预览 | `code.small` + `textTertiary` |

#### 代码卡片

```
┌──────────────────────────────────────┐
│ 🔧 Read                        📋    │
│ ─────────────────────────────────── │
│ src/components/Header.tsx            │
│ ─────────────────────────────────── │
│  12 │ import React from 'react'      │
│  13 │ const Header = () => {         │
│  14 │   ...                          │
│     │ 展开查看 156 行 ▼               │
└──────────────────────────────────────┘
```

| 属性 | 值 |
|------|-----|
| 背景色 | `terminalBg` |
| 圆角 | 8pt |
| 内边距 | 12pt |
| 头部 | `codeSmall` + `accentInfo` |
| 文件路径 | `codeSmall` + `textSecondary` |
| 行号 | `codeXSmall` + `terminal.comment` |
| 代码 | `codeSmall` + `terminalText` |

### 6.3 输入框（Input）

#### 文本输入框

```
┌─────────────────────────────────────┐
│ 占位文字...                          │
└─────────────────────────────────────┘
```

| 属性 | 值 |
|------|-----|
| 高度 | 自适应（最小 44pt）|
| 最大行数 | 4 行 |
| 背景色 | `bgTertiary` |
| 圆角 | 20pt（胶囊形）|
| 内边距 | 14pt 水平，10pt 垂直 |
| 字体 | `body` |
| 占位符 | `textTertiary` |

#### 聊天输入栏

```
┌────────────────────────────────────────┐
│  ⏸  │  输入消息...              │  ⬆   │
└────────────────────────────────────────┘
```

| 元素 | 规格 |
|------|------|
| 中断按钮 | 28pt，`accentDanger` 80%透明度 |
| 输入框 | 弹性宽度 |
| 发送按钮 | 32pt，启用时 `accentPrimary`，禁用时 `textDisabled` |
| 整体高度 | 56pt（含内边距）|
| 背景 | `bgPrimary` |

### 6.4 状态指示器（Status Indicator）

#### 连接状态圆点

```
基础：● 10pt 实心圆
脉冲：● 10pt + ○ 16pt 脉冲环（running/waiting 状态）
```

| 状态 | 颜色 | 动画 |
|------|------|------|
| connected | `accentSuccess` | 无 |
| running | `accentSuccess` | 脉冲 |
| waiting | `accentWarning` | 脉冲 |
| idle | `textTertiary` | 无 |
| error | `accentDanger` | 无 |
| disconnected | `textDisabled` | 无 |

#### 连接状态徽章

```
┌────────────────┐
│ ● 已连接       │
└────────────────┘
```

| 属性 | 值 |
|------|-----|
| 背景色 | `bgTertiary` |
| 圆角 | `radius.full` |
| 内边距 | 8pt 水平，4pt 垂直 |
| 圆点 | 8pt |
| 文字 | `caption1` + `textSecondary` |

### 6.5 消息行（Message Row）

采用 IDE 风格的行列布局，而非聊天气泡：

```
┌──────────────────────────────────────────────┐
│ ✦  Claude                                    │
│    这是 Claude 的回复内容，可以很长很长...      │
└──────────────────────────────────────────────┘

┌──────────────────────────────────────────────┐
│ 🔧 Read(src/index.ts)                   📋   │
│    ────────────────────────────────────────  │
│    1 │ import { foo } from 'bar'             │
│    2 │ ...                                   │
└──────────────────────────────────────────────┘

┌──────────────────────────────────────────────┐
│                                         ⌨    │
│    我输入的内容在右边                   │
└──────────────────────────────────────────────┘
```

| 消息类型 | 图标 | 图标颜色 | 内容样式 |
|---------|------|---------|---------|
| claude | `sparkles` | `accentClaude` | `body` + `textPrimary` |
| userInput | `keyboard` | `accentPrimary` | 右对齐，`body` |
| toolCall | `wrench.and.screwdriver` | `accentInfo` | 带代码块 |
| toolResult | `checkmark.circle` | `accentSuccess` | `code.small` |
| error | `exclamationmark.triangle` | `accentDanger` | 红色背景 10% |
| system | `info.circle` | `textSecondary` | 居中，`footnote` |

### 6.6 权限请求卡片（Permission Card）

这是核心交互组件，必须视觉突出：

```
╔══════════════════════════════════════════════╗
║  🔐  Claude 想要执行命令                      ║
║                                              ║
║  ┌────────────────────────────────────────┐  ║
║  │ npm run build                          │  ║
║  └────────────────────────────────────────┘  ║
║                                              ║
║  ┌────────┐  ┌────────┐  ┌──────────────┐   ║
║  │ [Y]    │  │ [N]    │  │ [A]          │   ║
║  │  允许  │  │  拒绝  │  │  始终允许    │   ║
║  └────────┘  └────────┘  └──────────────┘   ║
╚══════════════════════════════════════════════╝
```

| 属性 | 值 |
|------|-----|
| 展示方式 | Sheet 弹出，半屏 |
| 背景色 | `bgElevated` |
| 边框 | 2pt `accentWarning` |
| 圆角 | 16pt |
| 内边距 | 20pt |
| 标题 | `title3` |
| 命令块 | `terminalBg` 背景，`codeSmall` |
| 允许按钮 | `accentSuccess` 背景 |
| 拒绝按钮 | `accentDanger` 背景 |
| 始终允许 | `bgTertiary` 背景 |
| 按钮高度 | 52pt |
| 按钮间距 | 12pt |

---

## 七、页面布局规范

### 7.1 安全区域

遵循 iOS Safe Area：

```
┌────────────────────────────────┐
│         Dynamic Island         │ ← 顶部安全区域
├────────────────────────────────┤
│                                │
│         内容区域                │
│                                │
├────────────────────────────────┤
│         Home Indicator         │ ← 底部安全区域
└────────────────────────────────┘
```

### 7.2 页面边距

| 位置 | 边距 |
|------|------|
| 左右边距 | 16pt |
| 顶部（导航栏下） | 0pt（ScrollView 自带） |
| 底部（输入栏上） | 0pt |

### 7.3 会话列表页布局

```
┌────────────────────────────────────────┐
│ ←      CC Connect              ⚙️      │ 导航栏
├────────────────────────────────────────┤
│ ⚡ 活跃连接 ─────────────────────────  │ 分组标题
│ ┌────────────────────────────────────┐│
││ 🟡 项目重构                     ⚠️  ││ 会话卡片
││ 等待输入 · 2分钟前                  ││
││ > npm run build 需要批准           ││
│└────────────────────────────────────┘│
│                                        │
│ ┌────────────────────────────────────┐│
││ 🟢 API 开发                         ││
││ 运行中 · 刚刚                        ││
│└────────────────────────────────────┘│
│                                        │
│ 📜 历史记录 ─────────────────────────  │
│ ┌────────────────────────────────────┐│
││ ⚫ 测试修复                         ││
││ 已断开 · 3小时前                    ││
│└────────────────────────────────────┘│
│                                        │
│        ┌─────────────────────┐        │
│        │  ＋ 扫码新建连接    │        │ 主操作按钮
│        └─────────────────────┘        │
└────────────────────────────────────────┘
```

### 7.4 会话详情页布局

```
┌────────────────────────────────────────┐
│ ←   项目重构              🟢 已连接    │ 导航栏
├────────────────────────────────────────┤
│                                        │
│ ✦ Claude                               │
│   我来帮你重构这个模块...               │
│                                        │
│ ┌────────────────────────────────────┐│
││🔧 Read                          📋  ││ 工具卡片
││ src/components/Header.tsx           ││
││────────────────────────────────────││
││ 12 │ import React from 'react'     ││
││ 13 │ const Header = () => {        ││
│└────────────────────────────────────┘│
│                                        │
│ ✦ Claude                               │
│   发现了一些问题...                     │
│                                        │
│                          ⌨            │
│   我觉得可以这样改                    │ 用户消息（右对齐）
│                                        │
├────────────────────────────────────────┤
│     ┌─ Thinking... ──┐                 │ 状态浮层
│     └────────────────┘                 │
├────────────────────────────────────────┤
│ ⏸ │ 输入消息...                  │ ⬆  │ 输入栏
└────────────────────────────────────────┘
```

### 7.5 引导页布局

```
┌────────────────────────────────────────┐
│                                        │
│                 ⚡                     │ 品牌图标
│                                        │
│           CC Connect                   │
│      Claude Code 移动控制台             │
│                                        │
│ ┌────────────────────────────────────┐│
││ 1  在终端安装 CLI                    ││ 步骤卡片
││    brew install cc-connect      📋 ││
│└────────────────────────────────────┘│
│ ┌────────────────────────────────────┐│
││ 2  运行命令                          ││
││    cc start                     📋 ││
│└────────────────────────────────────┘│
│ ┌────────────────────────────────────┐│
││ 3  扫描二维码                        ││
││    准备好后点击下方按钮              ││
│└────────────────────────────────────┘│
│                                        │
│        ┌─────────────────────┐        │
│        │   📷 扫描二维码     │        │ 主操作
│        └─────────────────────┘        │
│                                        │
│           跳过，稍后连接               │ 次要操作
└────────────────────────────────────────┘
```

---

## 八、交互规范

### 8.1 触控规范

| 规范 | 值 |
|------|-----|
| 最小触控区域 | 44 × 44 pt |
| 按钮最小宽度 | 80pt |
| 按钮间距 | 至少 8pt |
| 可点击元素反馈 | 高亮或缩放 |

### 8.2 手势操作

| 手势 | 位置 | 动作 |
|------|------|------|
| 下拉 | 消息列表 | 刷新连接状态 |
| 左滑 | 会话卡片 | 删除会话 |
| 长按 | 消息 | 复制菜单 |
| 双击 | 工具卡片 | 展开/折叠 |
| 点击空白 | 消息列表 | 收起键盘 |

### 8.3 触觉反馈

| 场景 | 反馈类型 |
|------|---------|
| 按钮点击 | `UIImpactFeedbackGenerator(.light)` |
| 权限按钮点击 | `UIImpactFeedbackGenerator(.medium)` |
| 连接成功 | `UINotificationFeedbackGenerator(.success)` |
| 连接失败 | `UINotificationFeedbackGenerator(.error)` |
| 滑动删除 | `UIImpactFeedbackGenerator(.medium)` |
| 复制成功 | `UINotificationFeedbackGenerator(.success)` |

### 8.4 键盘处理

| 场景 | 行为 |
|------|------|
| 键盘弹出 | 消息列表上移，保持输入框可见 |
| 点击空白 | 收起键盘 |
| 发送消息 | 收起键盘 |
| 工具栏 | 显示「完成」按钮 |

---

## 九、动效规范

### 9.1 动效原则

1. **快速响应**：动效时长不超过 300ms
2. **自然流畅**：使用 spring 或 easeInOut
3. **有意义**：动效传达状态变化
4. **不打扰**：可以被用户操作打断

### 9.2 标准动效

| 场景 | 时长 | 曲线 |
|------|------|------|
| 页面切换 | 300ms | `.easeInOut` |
| 卡片展开 | 250ms | `.spring(response: 0.3)` |
| 状态变化 | 200ms | `.easeInOut` |
| 消息出现 | 200ms | `.easeOut` |
| Sheet 弹出 | 300ms | `.spring` |
| Toast 出现 | 200ms | `.easeOut` |
| Toast 消失 | 150ms | `.easeIn` |

### 9.3 状态动画

#### 连接状态脉冲

```swift
// running 和 waiting 状态的脉冲动画
Circle()
    .stroke(statusColor.opacity(0.5), lineWidth: 2)
    .frame(width: 16, height: 16)
    .scaleEffect(isAnimating ? 1.5 : 1)
    .opacity(isAnimating ? 0 : 1)
    .animation(
        .easeOut(duration: 1)
        .repeatForever(autoreverses: false),
        value: isAnimating
    )
```

#### Thinking 状态

```swift
// 三个点的跳动动画
HStack(spacing: 4) {
    ForEach(0..<3) { index in
        Circle()
            .fill(Color.accentClaude)
            .frame(width: 6, height: 6)
            .offset(y: isAnimating ? -4 : 0)
            .animation(
                .easeInOut(duration: 0.4)
                .repeatForever()
                .delay(Double(index) * 0.15),
                value: isAnimating
            )
    }
}
```

#### 消息出现

```swift
// 新消息从底部滑入
.transition(.move(edge: .bottom).combined(with: .opacity))
.animation(.easeOut(duration: 0.2), value: messages.count)
```

### 9.4 权限请求动效

```swift
// Sheet 弹出时带有轻微弹性
.sheet(item: $permissionRequest) { request in
    PermissionSheet(request: request)
        .presentationDetents([.medium])
        .presentationDragIndicator(.visible)
}

// 按钮点击反馈
Button(action: {
    UIImpactFeedbackGenerator(style: .medium).impactOccurred()
    // ...
}) { ... }
.scaleEffect(isPressed ? 0.95 : 1)
.animation(.easeInOut(duration: 0.1), value: isPressed)
```

---

## 十、无障碍规范

### 10.1 Dynamic Type

所有文字必须支持 Dynamic Type：

```swift
// 使用相对字号
Text("标题")
    .font(.headline) // 自动适配 Dynamic Type

// 而不是固定字号
Text("标题")
    .font(.system(size: 17)) // ❌ 不推荐
```

### 10.2 VoiceOver

| 元素 | 标签 | 提示 |
|------|------|------|
| 状态指示器 | "连接状态：已连接" | - |
| 发送按钮 | "发送" | "发送消息" |
| 中断按钮 | "中断" | "中断当前任务" |
| 会话卡片 | "[会话名] [状态]" | "双击进入会话" |
| 权限按钮 | "[操作]" | "允许/拒绝此权限请求" |

### 10.3 颜色对比度

所有文字与背景的对比度必须符合 WCAG AA 标准：

| 组合 | 对比度 | 要求 |
|------|-------|------|
| `textPrimary` / `bgPrimary` | 15:1 | ✅ |
| `textSecondary` / `bgPrimary` | 7:1 | ✅ |
| `textTertiary` / `bgPrimary` | 4.5:1 | ✅ |
| `accentPrimary` / `bgPrimary` | 6:1 | ✅ |

---

## 十一、文件结构

设计系统代码组织：

```
cc connect/
├── DesignSystem/
│   ├── Tokens/
│   │   ├── Colors.swift        # 颜色定义
│   │   ├── Typography.swift    # 字体定义
│   │   ├── Spacing.swift       # 间距定义
│   │   └── Icons.swift         # 图标定义
│   │
│   ├── Components/
│   │   ├── Buttons/
│   │   │   ├── CCPrimaryButton.swift
│   │   │   ├── CCSecondaryButton.swift
│   │   │   └── CCQuickActionButton.swift
│   │   │
│   │   ├── Cards/
│   │   │   ├── CCSessionCard.swift
│   │   │   ├── CCCodeCard.swift
│   │   │   └── CCPermissionCard.swift
│   │   │
│   │   ├── Inputs/
│   │   │   ├── CCTextField.swift
│   │   │   └── CCChatInputBar.swift
│   │   │
│   │   ├── Status/
│   │   │   ├── CCStatusIndicator.swift
│   │   │   ├── CCConnectionBadge.swift
│   │   │   └── CCStatusBar.swift
│   │   │
│   │   └── Messages/
│   │       ├── CCMessageRow.swift
│   │       ├── CCClaudeMessage.swift
│   │       ├── CCUserMessage.swift
│   │       └── CCToolMessage.swift
│   │
│   └── Sheets/
│       ├── CCPermissionSheet.swift
│       └── CCSelectionSheet.swift
│
└── Resources/
    └── Assets.xcassets/
        ├── Colors/
        │   ├── bg.primary.colorset/
        │   ├── bg.secondary.colorset/
        │   ├── text.primary.colorset/
        │   └── ...
        └── Icons/
            └── ...
```

---

## 十二、实施计划

### Phase 1：基础设施（1-2天）

1. 更新 Colors.swift，实现新色彩系统
2. 更新 Typography.swift，实现字体系统
3. 创建 Spacing.swift
4. 在 Assets.xcassets 添加颜色资源

### Phase 2：核心组件（2-3天）

1. 重写 CCSessionCard
2. 重写 CCMessageRow（IDE 风格）
3. 创建 CCPermissionSheet
4. 重写 CCChatInputBar
5. 更新 CCStatusIndicator

### Phase 3：页面重构（2-3天）

1. 重构 SessionListView
2. 重构 SessionDetailView
3. 重构 OnboardingView
4. 统一导航栏样式

### Phase 4：交互优化（1-2天）

1. 添加触觉反馈
2. 实现手势操作
3. 优化键盘处理
4. 添加动画效果

### Phase 5：测试与打磨（1-2天）

1. 深色/浅色模式测试
2. Dynamic Type 测试
3. VoiceOver 测试
4. 各机型适配测试

---

## 附录 A：颜色资源清单

在 Assets.xcassets 中需要创建的颜色：

```
Colors/
├── bg.primary         Dark: #0D1117  Light: #FFFFFF
├── bg.secondary       Dark: #161B22  Light: #F6F8FA
├── bg.tertiary        Dark: #21262D  Light: #F0F3F6
├── bg.elevated        Dark: #30363D  Light: #FFFFFF
├── border.default     Dark: #30363D  Light: #D1D9E0
├── border.muted       Dark: #21262D  Light: #E6EBF1
├── text.primary       Dark: #E6EDF3  Light: #1F2328
├── text.secondary     Dark: #8B949E  Light: #656D76
├── text.tertiary      Dark: #6E7681  Light: #8C959F
├── text.disabled      Dark: #484F58  Light: #AFB8C1
└── text.link          Dark: #58A6FF  Light: #0969DA
```

---

## 附录 B：设计资源

### 参考资源

- [GitHub Primer Design System](https://primer.style/)
- [Apple Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [SF Symbols](https://developer.apple.com/sf-symbols/)

### 工具

- Figma：设计稿
- SF Symbols App：图标选择
- Contrast Checker：对比度检查

---

**文档状态**：已完成
**负责人**：花叔
**下次更新**：实施过程中根据实际情况调整
