# CC Connect 用户流程图

> 版本：v1.0 | 更新日期：2026-01-21

---

## 1. 核心流程总览

```
┌─────────────────────────────────────────────────────────────┐
│                       CC Connect 用户旅程                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   [首次使用]──────>[日常使用]──────>[高级场景]              │
│       │               │               │                     │
│       ▼               ▼               ▼                     │
│   ┌───────┐      ┌────────┐      ┌────────┐                │
│   │安装配对│      │监控任务│      │多会话  │                │
│   └───────┘      │远程输入│      │管理    │                │
│                  │接收通知│      └────────┘                │
│                  └────────┘                                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 2. 首次使用流程

### 2.1 完整流程图

```
[用户下载App]
      │
      ▼
┌─────────────┐
│  启动App    │
│  (欢迎页)   │
└──────┬──────┘
       │
       ▼
┌─────────────┐     ┌─────────────────────────────────┐
│  引导页1    │     │  内容：                          │
│  "3步连接"  │────>│  1. 安装CLI                     │
└──────┬──────┘     │  2. 运行命令                    │
       │            │  3. 扫码连接                    │
       ▼            └─────────────────────────────────┘
┌─────────────┐
│  引导页2    │     显示安装命令：
│  安装CLI    │────> brew install cc-connect
└──────┬──────┘      或 npm install -g cc-connect
       │
       ▼
┌─────────────┐
│  引导页3    │     显示启动命令：
│  运行命令   │────> cc start
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  扫码页面   │◄────────────────────────────┐
└──────┬──────┘                             │
       │                                    │
       ▼                                    │
   (扫描二维码)                             │
       │                                    │
       ├────────[扫码失败]─────────────────>│
       │                                    │
       ▼                                    │
┌─────────────┐                             │
│  连接中...  │                             │
└──────┬──────┘                             │
       │                                    │
       ├────────[连接失败]─────────────────>│
       │                                    │
       ▼
┌─────────────┐
│  连接成功!  │
│  (成功提示) │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  请求通知   │
│  权限       │
└──────┬──────┘
       │
       ├────[允许]────┐
       │              │
       ├────[拒绝]────┤
       │              │
       ▼              ▼
┌─────────────────────┐
│     主界面          │
│   (会话详情页)      │
└─────────────────────┘
```

### 2.2 关键节点说明

| 节点 | 目标时长 | 失败处理 |
|------|---------|---------|
| 下载到打开 | 即时 | - |
| 阅读引导 | < 30秒 | 可跳过 |
| 安装CLI | < 1分钟 | 显示详细帮助 |
| 扫码连接 | < 10秒 | 重试 + 手动输入选项 |
| 通知权限 | 即时 | 可稍后设置 |
| **总计** | **< 3分钟** | - |

---

## 3. 日常使用流程

### 3.1 启动并连接

```
[用户打开App]
      │
      ▼
  (检查连接状态)
      │
      ├────[已连接]─────────────────>┌──────────────┐
      │                              │   会话列表    │
      │                              └──────────────┘
      │
      ├────[未连接/CLI离线]─────────>┌──────────────┐
      │                              │   离线提示    │
      │                              │ "请启动CLI"  │
      │                              └──────────────┘
      │
      └────[从未配对]───────────────>┌──────────────┐
                                     │   扫码页面    │
                                     └──────────────┘
```

### 3.2 查看输出 + 远程输入

```
┌──────────────┐
│   会话列表    │
│              │
│ ● 会话1 运行中│◄───────────────────────┐
│ ○ 会话2 空闲  │                        │
│              │                        │
└──────┬───────┘                        │
       │                                │
       ▼ (点击会话1)                    │
┌──────────────────────────────┐        │
│        会话详情页             │        │
├──────────────────────────────┤        │
│                              │        │
│  [Claude Code 输出区域]       │        │
│  > Analyzing codebase...     │        │
│  > Found 3 files to modify   │        │
│  > Waiting for confirmation  │        │
│                              │        │
│  ─────────────────────────── │        │
│  状态: ⏳ 等待输入            │        │
│                              │        │
├──────────────────────────────┤        │
│  [是] [否] [继续] [自定义]    │◄──快捷回复
│                              │        │
│  ┌────────────────────────┐  │        │
│  │ 输入框...              │  │        │
│  └────────────────────────┘  │        │
│           [发送]             │        │
└──────────────┬───────────────┘        │
               │                        │
               ▼ (发送输入)             │
         (消息发送中)                   │
               │                        │
               ├────[成功]──────────────┘
               │
               └────[失败]───> 显示错误，可重试
```

### 3.3 接收推送通知

```
[Claude Code 状态变化]
        │
        ▼ (CLI检测到)
   ┌─────────────┐
   │ 发送到云端   │
   └──────┬──────┘
          │
          ▼
   ┌─────────────┐
   │ 云端推送APNs │
   └──────┬──────┘
          │
          ▼
┌─────────────────────────────────┐
│  iPhone 收到通知                 │
│  ┌─────────────────────────┐    │
│  │ CC Connect              │    │
│  │ Claude 需要你的输入      │    │
│  │ "确认修改这3个文件吗？"  │    │
│  └─────────────────────────┘    │
└─────────────┬───────────────────┘
              │
              ▼ (点击通知)
       ┌──────────────┐
       │   会话详情页   │
       │  (自动定位到  │
       │   等待输入处)  │
       └──────────────┘
```

---

## 4. 会话管理流程

### 4.1 多会话切换

```
┌──────────────┐
│   会话详情    │
│   (会话1)    │
└──────┬───────┘
       │
       ▼ (点击左上角返回/下拉)
┌──────────────┐
│   会话列表    │
│              │
│ ● 会话1 运行中│
│ ○ 会话2 空闲  │
│ ◉ 会话3 等待  │◄─── 红点表示需要注意
│              │
│   [+ 新连接]  │
└──────┬───────┘
       │
       ▼ (点击会话3)
┌──────────────┐
│   会话详情    │
│   (会话3)    │
└──────────────┘
```

### 4.2 新增连接

```
┌──────────────┐
│   会话列表    │
│              │
│   [+ 新连接]  │
└──────┬───────┘
       │
       ▼ (点击)
┌──────────────┐
│   扫码页面    │
│              │
│  [扫描二维码] │
│              │
│  或手动输入   │
│  配对码       │
└──────────────┘
```

---

## 5. 设置流程

```
┌──────────────┐
│   会话列表    │
│      ⚙️      │◄─── 右上角设置图标
└──────┬───────┘
       │
       ▼ (点击设置)
┌───────────────────────────────┐
│           设置                 │
├───────────────────────────────┤
│                               │
│  通知设置                      │
│  ├─ 任务完成通知    [开关]    │
│  ├─ 需要输入通知    [开关]    │
│  └─ 错误通知        [开关]    │
│                               │
│  ─────────────────────────    │
│                               │
│  连接管理                      │
│  └─ 已连接设备 (1)     [>]    │
│                               │
│  ─────────────────────────    │
│                               │
│  关于                         │
│  ├─ 版本 1.0.0                │
│  ├─ 帮助文档           [>]    │
│  └─ 反馈问题           [>]    │
│                               │
└───────────────────────────────┘
```

---

## 6. 错误处理流程

### 6.1 连接断开

```
[检测到连接断开]
        │
        ▼
┌──────────────────────────────┐
│  Toast: "连接已断开，重连中..." │
└──────────────┬───────────────┘
               │
               ▼ (自动重连)
         ┌─────────────┐
         │  重连中...   │
         └──────┬──────┘
                │
                ├────[成功]───> Toast: "已重新连接"
                │
                └────[失败x3]─> 显示断开状态
                               + 手动重连按钮
```

### 6.2 CLI 离线

```
[App打开，CLI未运行]
        │
        ▼
┌──────────────────────────────┐
│        离线状态页面           │
├──────────────────────────────┤
│                              │
│      📡 CLI 未连接           │
│                              │
│   请在电脑终端运行:           │
│   ┌────────────────────┐     │
│   │ cc start           │     │
│   └────────────────────┘     │
│                              │
│   [复制命令]  [帮助]         │
│                              │
└──────────────────────────────┘
```

---

## 7. 页面清单

| 页面 | 入口 | 核心功能 |
|------|------|---------|
| 欢迎页 | 首次启动 | 品牌展示 |
| 引导页(x3) | 首次启动 | 安装指引 |
| 扫码页 | 引导/新增连接 | 扫码配对 |
| 会话列表 | 主入口 | 切换会话、新增连接 |
| 会话详情 | 点击会话 | 查看输出、发送输入 |
| 设置页 | 列表页右上角 | 通知、连接管理 |
| 离线状态页 | CLI未连接时 | 提示用户启动CLI |

---

**文档状态**：完成
**负责人**：花叔
